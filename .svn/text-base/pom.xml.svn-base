<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.avaya.ept.dw</groupId>
  <artifactId>RightNow</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <name>Oracle Right Now Connector</name>
  <properties>
	<test.project.pattern>Test_*</test.project.pattern>
	<gallio.install.dir>${project.build.directory}/gallio</gallio.install.dir>
	<gallio.report.dir>${project.build.directory}/gallio-reports</gallio.report.dir>
	<gallio.report.name.format>gallio-test-report</gallio.report.name.format>
	<gallio.converter.dir>${project.build.directory}/gallio-to-junit-reports-converter</gallio.converter.dir>
	<fxcop.install.dir>${project.build.directory}/fxcop</fxcop.install.dir>
  </properties>
<!-- <build>
  <plugins>
    <plugin>
      <artifactId>maven-dependency-plugin</artifactId>
      <executions>
        <execution>
          <id>install-gallio</id>
          <phase>generate-test-sources</phase>
          <goals>
            <goal>unpack</goal>
          </goals>
          <configuration>
            <artifactItems>
              <artifactItem>
                <groupId>org.gallio</groupId>
                <artifactId>GallioBundle</artifactId>
                <version>3.2.750.0</version>
                <type>zip</type>
                <overWrite>false</overWrite>
                <outputDirectory>${gallio.install.dir}</outputDirectory>
              </artifactItem>
            </artifactItems>
          </configuration>
        </execution>
        <execution>
          <id>install-gallio-to-junit-reports-converter</id>
          <phase>generate-test-sources</phase>
          <goals>
            <goal>unpack</goal>
          </goals>
          <configuration>
            <artifactItems>
              <artifactItem>
                <groupId>com.avaya.commons</groupId>
                <artifactId>avaya-commons-gallio-to-junit-reports-converter</artifactId>
                <version>1.0-SNAPSHOT</version>
                <outputDirectory>${gallio.converter.dir}</outputDirectory>
              </artifactItem>
            </artifactItems>
          </configuration>
        </execution>
      </executions>
    </plugin>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-antrun-plugin</artifactId>
      <version>1.6</version>
      <executions>
        <execution>
          <id>run-gallio</id>
          <phase>test</phase>
          <goals>
            <goal>run</goal>
          </goals>
          <configuration>
            <target>
              <apply executable="${gallio.install.dir}/bin/Gallio.Echo.exe" parallel="false">
                <arg value="/verbosity:Verbose"/>
                <arg value="/report-directory:${gallio.report.dir}"/>
                <arg value="/report-name-format:${gallio.report.name.format}"/>
                <arg value="/report-type:Xml"/>
                <srcfile/>
                <fileset dir="." includes="**/${test.project.pattern}/bin/${build_type}/${test.project.pattern}.dll"/>
              </apply>
            </target>
          </configuration>
        </execution>
      </executions>
    </plugin>
    <plugin>
      <groupId>org.codehaus.mojo</groupId>
      <artifactId>xml-maven-plugin</artifactId>
      <version>1.0</version>
      <executions>
        <execution>
          <id>convert-gallio-reports-to-junit-format</id>
          <phase>prepare-package</phase>
          <goals>
            <goal>transform</goal>
          </goals>
        </execution>
      </executions>
      <configuration>
        <transformationSets>
          <transformationSet>
            <dir>${gallio.report.dir}</dir>
            <includes>
              <include>${gallio.report.name.format}.xml</include>
            </includes>
            <stylesheet>${gallio.converter.dir}/gallio-to-junit.xsl</stylesheet>
            <outputDir>${project.build.directory}/gallio-reports-junit-format</outputDir>
          </transformationSet>
        </transformationSets>
      </configuration>
    </plugin>
  </plugins>
</build> -->
<profiles>
  <profile>
    <id>sonar</id>
    <activation>
      <activeByDefault>false</activeByDefault>
    </activation>
    <properties>
      <sonar-java-runner-version>1.1</sonar-java-runner-version>
      <sonar-java-runner-parent-dir>${project.build.directory}</sonar-java-runner-parent-dir>
    </properties>
    <build>
      <plugins>
        <plugin>
          <artifactId>maven-dependency-plugin</artifactId>
          <executions>
            <execution>
              <id>install-fxcop</id>
              <phase>pre-integration-test</phase>
              <goals>
                <goal>unpack</goal>
              </goals>
              <configuration>
                <artifactItems>
                  <artifactItem>
                    <groupId>com.microsoft</groupId>
                    <artifactId>FxCopBundle</artifactId>
                    <version>10.0.30319.7</version>
                    <type>zip</type>
                    <overWrite>false</overWrite>
                    <outputDirectory>${fxcop.install.dir}</outputDirectory>
                  </artifactItem>
                </artifactItems>
              </configuration>
            </execution>
            <execution>
              <id>install-sonar-java-runner</id>
              <phase>pre-integration-test</phase>
              <goals>
                <goal>unpack</goal>
              </goals>
              <configuration>
                <artifactItems>
                  <artifactItem>
                    <groupId>sonar</groupId>
                    <artifactId>sonar-java-runner</artifactId>
                    <version>${sonar-java-runner-version}</version>
                    <type>zip</type>
                    <outputDirectory>${sonar-java-runner-parent-dir}</outputDirectory>
                  </artifactItem>
                </artifactItems>
              </configuration>
            </execution>
            <execution>
              <id>install-sonar-java-runner-properties</id>
              <phase>integration-test</phase>
              <goals>
                <goal>unpack</goal>
              </goals>
              <configuration>
                <artifactItems>
                  <artifactItem>
                    <groupId>com.avaya.commons</groupId>
                    <artifactId>avaya-commons-sonar-java-runner-properties</artifactId>
                    <version>1.0-SNAPSHOT</version>
                    <outputDirectory>${sonar-java-runner-parent-dir}/sonar-runner-${sonar-java-runner-version}/conf</outputDirectory>                                
                  </artifactItem>
                </artifactItems>
              </configuration>
            </execution>
          </executions>
        </plugin>
        <plugin>
          <artifactId>maven-resources-plugin</artifactId>
          <version>2.5</version>
          <executions>
            <execution>
              <id>filter-sonar-project-properties</id>
              <phase>post-integration-test</phase>
              <goals>
                <goal>copy-resources</goal>
              </goals>
              <configuration>
                <outputDirectory>${basedir}</outputDirectory>
                <resources>         
                  <resource>
                    <directory>src/main/resources</directory>
                    <includes>
                      <include>sonar-project.properties</include>
                    </includes>
                    <filtering>true</filtering>
                  </resource>
                </resources>             
              </configuration>           
            </execution>
          </executions>
        </plugin>
      </plugins>
    </build>
  </profile>
</profiles>
</project>